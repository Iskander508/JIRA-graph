function makeUniqueId(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;16>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function issueIsDone(e){return"done"in e&&e.done||"Done"==e.status}function issueIsOpen(e){return"Open"==e.status}function renderGraph(e,t){for(var n=Viva.Graph.graph(),r=-1!=t.indexOf("JIRA"),o=-1!=t.indexOf("JIRA-all"),i=-1!=t.indexOf("pull"),a=-1!=t.indexOf("branches"),s=-1!=t.indexOf("merged"),u=-1!=t.indexOf("conflicts"),f=-1!=t.indexOf("hide-orphans"),c=new Set,d={},l={},p=0;p<e.nodes.length;p++){var v=e.nodes[p];v.svgObject=null,d[v.id]=[],l[v.id]=v,(r||"JIRA"!=v.type)&&(a||"git"!=v.type)&&(s||"git"!=v.type||!v.data.inMaster||v.data.mergeBase)&&(u||"git"!=v.type||"conflict"!=v.data.type)&&(i||"stash"!=v.type)&&(n.addNode(v.id,v),c.add(v.id))}for(var p=0;p<e.edges.length;p++){var h=e.edges[p];d[h.source].push(h),d[h.target].push(h),c.has(h.source)&&c.has(h.target)&&n.addLink(h.source,h.target,h.type)}var g=new Set;if(!o){var m=function(e,t,n){if(n>20)return!1;if("JIRA"!=e.data.type)return!1;var r=e.data.data;if(!issueIsDone(r)&&!issueIsOpen(r))return!1;if("pullRequests"in r){var o=!0;if(r.pullRequests.forEach(function(e){"OPEN"==e.status&&(o=!1)}),!o)return!1}if("branches"in r||"subtasks"in r){var o=!0;if(t.getLinks(e.id).forEach(function(e){var r=t.getNode(e.toId);switch(r.data.type){case"JIRA":m(r,t,n+1)&&(o=!1);break;case"git":r.data.data.inMaster||r.data.data.master||(o=!1)}}),!o)return!1}return!0};n.forEachNode(function(e){m(e,n,0)&&g.add(e.id)})}f&&n.forEachNode(function(e){0==n.getLinks(e.id).length&&g.add(e.id)}),g.forEach(function(e){n.removeNode(e),c["delete"](e)});var y=Viva.Graph.View.svgGraphics(),x=function(e,t){var n=e.attr("class"),r=n?n.split(" "):[],o=r.indexOf(t);return[-1!=o,o,r]},w=function(e,t){return x(e,t)[0]},b=function(e,t,n){var r=x(e,t);r[0]!=n&&(n?r[2].push(t):r[2].splice(r[1],1),e.attr("class",r[2].join(" ")))},E=function(e,t){var n=x(e,t);n[0]?n[2].splice(n[1],1):n[2].push(t),e.attr("class",n[2].join(" "))},L=function(e,t,r){n.forEachLinkedNode(e,function(e,n){if(e.id!=(r?n.fromId:n.toId)){var o=y.getLinkUI(n.id);if(o&&"git"==e.data.type&&"conflict"!=e.data.data.type){var i=r?"highlight-successor":"highlight-predecessor";b(o,i,t),b(e.data.svgObject,i,t),L(e.id,t,r)}}})},k=function(e){if(E(e.data.svgObject,"selected"),w(e.data.svgObject,"selected"))for(var t=d[e.id],r=0;r<t.length;r++){var o=t[r],i=o.source==e.id?o.target:o.source;if(!c.has(i)){var a=l[i];"JIRA"==a.type&&(n.addNode(a.id,a),c.add(a.id),n.addLink(o.source,o.target,o.type))}}else{var s=[];n.forEachLinkedNode(e.id,function(e,t){"JIRA"==e.data.type&&s.push(e.id)});for(var r=0;r<s.length;r++)n.removeNode(s[r]),c["delete"](s[r])}},N=function(e,t){b(e.data.svgObject,"highlight-level-1",t),n.forEachLinkedNode(e.id,function(e,n){var r=y.getLinkUI(n.id);if(r&&"git"==e.data.type){var o=e.id==n.toId,i=o?"highlight-successor":"highlight-predecessor";b(e.data.svgObject,i,t),b(r,i,t)}})},I=function(e,t,r){0!=r&&(b(e.data.svgObject,"highlight-level-"+r,t),"JIRA"==e.data.type&&n.forEachLinkedNode(e.id,function(e,n){I(e,t,r-1)}))},j=function(e,t){b(e.data.svgObject,"highlight-level-3",t),n.forEachLinkedNode(e.id,function(e,n){b(e.data.svgObject,"highlight-level-2",t);var r=y.getLinkUI(n.id);r&&(b(e.data.svgObject,"highlight-conflict",t),b(r,"highlight-conflict",t))})};y.node(function(t){var n=Viva.Graph.svg("g");n.attr("id",t.id+"_"+makeUniqueId());var o=t.data.type;"type"in t.data.data&&(o+=" "+t.data.data.type),n.attr("class",o);var i=Viva.Graph.svg("rect").attr("class","boundary");switch(i.layout=!1,n.append(i),n.boundary=i,t.data.type){case"JIRA":var a=t.data.data,s=Viva.Graph.svg("line").attr("stroke-width","5").attr("class","issue-type").attr("x1",2).attr("y1",0).attr("x2",2).attr("y2",46);s.append(Viva.Graph.svg("title").text(a.type)),n.append(s);var u=Viva.Graph.svg("a");u.link(a.URL),u.attr("target","_blank"),u.append(Viva.Graph.svg("title").text(a.code+": "+a.summary));var f=Viva.Graph.svg("text").attr("x",7).attr("y",15).text(a.code+": "+a.summary);issueIsDone(a)&&f.attr("class","done"),u.append(f),n.append(u);var c=Viva.Graph.svg("image").attr("width",24).attr("height",24).attr("x",7).attr("y",20).link(a.assigneeImage);c.append(Viva.Graph.svg("title").text(a.assignee)),n.append(c);var d=37;if(a.epic){var l=Viva.Graph.svg("rect").attr("x",d).attr("y",20).attr("width",70).attr("height",20).attr("rx",4).attr("class",a.epicColor);n.append(l);var p=Viva.Graph.svg("text").attr("x",d+5).attr("y",35).attr("class",a.epicColor).text(a.epic.substring(0,7));p.append(Viva.Graph.svg("title").text(a.epic)),n.append(p),d+=75}var v=Viva.Graph.svg("g");v.append(Viva.Graph.svg("title").text("completed: "+a.completed+"h\nremaining: "+(a.estimated-a.completed)+"h\ntotal: "+a.estimated+"h"));var h=Viva.Graph.svg("text").attr("x",d).attr("y",32).attr("fill",a.statusColor).attr("class","status").text(a.status+" ("+a.completed+"/"+a.estimated+")");if(v.append(h),0!=a.estimated){var g=6*a.estimated;g>200&&(g=200);var m=g*a.completed/a.estimated;if(m>0){var y=Viva.Graph.svg("line").attr("stroke-width","3").attr("class","completed").attr("x1",d).attr("y1",37).attr("x2",d+m).attr("y2",37);v.append(y)}if(g-m>0){var x=Viva.Graph.svg("line").attr("stroke-width","3").attr("class","incompleted").attr("x1",d+m).attr("y1",37).attr("x2",d+g).attr("y2",37);v.append(x)}}n.append(v),$(n).hover(function(){I(t,!0,3)},function(){I(t,!1,3)});break;case"git":var w=t.data.data;switch(w.type){case"branch":var u=Viva.Graph.svg("a");u.link(w.URL),u.attr("target","_blank"),w.info&&u.append(Viva.Graph.svg("title").text(w.info));var c=Viva.Graph.svg("image").attr("width",15).attr("height",15).attr("x",2).attr("y",2).link("branch.svg");c.append(Viva.Graph.svg("title").text(w.master?"master branch":"branch")),n.append(c);for(var b=15,E=0;E<w.branchNames.length;E++){var A=w.branchNames[E],f=Viva.Graph.svg("text").attr("x",20).attr("y",b).text(A);-1!=e.masterBranches.indexOf(A)&&f.attr("class","master"),u.append(f),b+=15}n.append(u),w.master&&n.attr("class",n.attr("class")+" master"),$(n).hover(function(){L(t.id,!0,!0),L(t.id,!0,!1)},function(){L(t.id,!1,!0),L(t.id,!1,!1)}),r||$(n).click(function(){k(t)});break;case"commit":var u=Viva.Graph.svg("a");u.link(w.URL),u.attr("target","_blank"),w.info&&u.append(Viva.Graph.svg("title").text(w.info));var c=Viva.Graph.svg("image").attr("width",15).attr("height",15).attr("x",2).attr("y",2).link("git.png");n.append(c);var f=Viva.Graph.svg("text").attr("x",20).attr("y",15).text(w.id.substring(0,10));u.append(f),n.append(u),$(n).hover(function(){L(t.id,!0,!0),L(t.id,!0,!1)},function(){L(t.id,!1,!0),L(t.id,!1,!1)});break;case"conflict":var c=Viva.Graph.svg("image").attr("width",15).attr("height",15).attr("x",2).attr("y",2).link("conflict.svg");c.append(Viva.Graph.svg("title").text("potential merge conflict")),n.append(c);for(var b=15,E=0;E<w.files.length;E++){var P=w.files[E],_=Viva.Graph.svg("a");_.link(P.URL),_.attr("target","_blank"),_.append(Viva.Graph.svg("text").attr("x",20).attr("y",b).text(P.file)),P.diff&&_.append(Viva.Graph.svg("title").text(P.diff)),n.append(_),b+=15}$(n).hover(function(){j(t,!0)},function(){j(t,!1)})}break;case"stash":var T=t.data.data,c=Viva.Graph.svg("image").attr("width",18).attr("height",15).attr("x",2).attr("y",2).link("pull-request.svg");c.append(Viva.Graph.svg("title").text("Pull request")),n.append(c);var u=Viva.Graph.svg("a");u.link(T.URL),u.attr("target","_blank");var f=Viva.Graph.svg("text").attr("x",22).attr("y",15).text(T.id+": "+T.name);u.append(f);var C,E;for(E=0;E<T.reviewers.length;++E){var S=T.reviewers[E],G=S.name+" "+(S.approved?"(✓)":"(?)");C?C+="\n":C="Reviewers:\n",C+=G}var R=Viva.Graph.svg("title").text(T.source+" → "+T.destination+(C?"\n"+C:""));u.append(R),n.append(u),$(n).hover(function(){N(t,!0)},function(){N(t,!1)})}return t.data.svgObject=n,n}).placeNode(function(e,t){if(e.attr("transform","translate("+t.x+","+t.y+")"),!e.boundary.layout){e.boundary.layout=!0;var n=e.getBBox();e.boundary.attr("x",0).attr("y",n.y).attr("width",n.width+5).attr("height",n.height)}});var A=Viva.Graph.svg("marker").attr("id","Triangle").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",10).attr("markerHeight",5).attr("orient","auto");A.append("path").attr("d","M 0 0 L 10 5 L 0 10 z");var P=y.getSvgRoot().append("defs");P.append(A);var _=Viva.Graph.geom();y.link(function(e){var t=Viva.Graph.svg("path");return e.data&&t.attr("class",e.data),"links"!=e.data&&t.attr("marker-end","url(#Triangle)"),t}).placeLink(function(e,t,r){var o=n.getNode(e.link.fromId),i=n.getNode(e.link.toId),a=document.getElementById(o.data.svgObject.id),s=document.getElementById(i.data.svgObject.id);if(a&&s){var u=a.getBoundingClientRect(),f=s.getBoundingClientRect(),c=u.width,d=u.height,l=f.width,p=f.height,v=e.parentNode.transform.animVal;if(v.numberOfItems>0){var h=v.getItem(0);switch(h.type){case SVGTransform.SVG_TRANSFORM_MATRIX:case SVGTransform.SVG_TRANSFORM_SCALE:var g=h.matrix.a,m=h.matrix.d;c/=g,d/=m,l/=g,p/=m}}var y={x:t.x+c/2,y:t.y+d/2},x={x:r.x+l/2,y:r.y+p/2},w=_.intersectRect(t.x,t.y,t.x+c,t.y+d,y.x,y.y,x.x,x.y)||y,b=_.intersectRect(r.x,r.y,r.x+l,r.y+p,y.x,y.y,x.x,x.y)||x,E="M "+w.x+" "+w.y+" L "+b.x+" "+b.y;if(e.attr("d",E),e.link.data){if(!e.label){var L=Viva.Graph.svg("text").text(e.link.data);L.attr("font-size",9),e.parentNode.append(L),e.label=L}e.label.attr("x",(w.x+b.x)/2).attr("y",(w.y+b.y)/2)}var k=e.parentNode;k.removeChild(e),k.appendChild(e)}});var T=Viva.Graph.Layout.forceDirected(n,{springLength:80,springCoeff:5e-5,gravity:-10,timeStep:20,stableThreshold:.03}),C=Viva.Graph.View.renderer(n,{graphics:y,layout:T});return C.run(50),C}!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Viva=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("ngraph.random"),o={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return r.randomIterator.apply(r,arguments)},random:function(){return r.random.apply(r,arguments)},events:e("ngraph.events")};o.Graph={version:e("./version.js"),graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:e("ngraph.forcelayout"),constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")},t.exports=o},{"./Algorithms/centrality.js":32,"./Algorithms/operations.js":33,"./Input/domInputManager.js":34,"./Input/dragndrop.js":35,"./Input/webglInputManager.js":36,"./Layout/constant.js":37,"./Utils/backwardCompatibleEvents.js":38,"./Utils/browserInfo.js":39,"./Utils/findElementPosition.js":41,"./Utils/getDimensions.js":42,"./Utils/intersectRect.js":43,"./Utils/rect.js":45,"./Utils/timer.js":46,"./View/renderer.js":48,"./View/svgGraphics.js":49,"./View/webglGraphics.js":50,"./WebGL/parseColor.js":51,"./WebGL/texture.js":52,"./WebGL/webgl.js":53,"./WebGL/webglAtlas.js":54,"./WebGL/webglImage.js":55,"./WebGL/webglImageNodeProgram.js":56,"./WebGL/webglInputEvents.js":57,"./WebGL/webglLine.js":58,"./WebGL/webglLinkProgram.js":59,"./WebGL/webglNodeProgram.js":60,"./WebGL/webglSquare.js":61,"./version.js":62,gintersect:2,"ngraph.events":6,"ngraph.forcelayout":7,"ngraph.fromjson":21,"ngraph.generators":22,"ngraph.graph":23,"ngraph.merge":24,"ngraph.random":25,"ngraph.tojson":26,simplesvg:27}],2:[function(e,t,n){function r(e,t,n,r,o,i,a,s){var u,f,c,d,l,p,v,h,g,m,y,x,w,b={x:0,y:0};return u=r-t,c=e-n,l=n*t-e*r,g=u*o+c*i+l,m=u*a+c*s+l,0!==g&&0!==m&&g>=0==m>=4?null:(f=s-i,d=o-a,p=a*i-o*s,v=f*e+d*t+p,h=f*n+d*r+p,0!==v&&0!==h&&v>=0==h>=0?null:(y=u*d-f*c,0===y?null:(x=0>y?-y/2:y/2,x=0,w=c*p-d*l,b.x=(0>w?w-x:w+x)/y,w=f*l-u*p,b.y=(0>w?w-x:w+x)/y,b)))}t.exports=r},{}],3:[function(e,t,n){t.exports.degree=e("./src/degree.js"),t.exports.betweenness=e("./src/betweenness.js")},{"./src/betweenness.js":4,"./src/degree.js":5}],4:[function(e,t,n){function r(e,t){function n(e){h[e]/=2}function r(e){h[e.id]=0}function o(e){u=e.id,s(u),i()}function i(){for(e.forEachNode(a);c.length;){for(var t=c.pop(),n=(1+v[t])/p[t],r=d[t],o=0;o<r.length;++o){var i=r[o];v[i]+=p[i]*n}t!==u&&(h[t]+=v[t])}}function a(e){v[e.id]=0}function s(n){function r(e){i(e.id)}function o(e){var t=e.id;d[t]=[],l[t]=-1,p[t]=0}function i(e){-1===l[e]&&(l[e]=l[a]+1,f.push(e)),l[e]===l[a]+1&&(p[e]+=p[a],d[e].push(a))}for(e.forEachNode(o),l[n]=0,p[n]=1,f.push(n);f.length;){var a=f.shift();Object.create(null);c.push(a),e.forEachLinkedNode(a,r,t)}}var u,f=[],c=[],d=Object.create(null),l=Object.create(null),p=Object.create(null),v=Object.create(null),h=Object.create(null);return e.forEachNode(r),e.forEachNode(o),t||Object.keys(h).forEach(n),h}t.exports=r},{}],5:[function(e,t,n){function r(e,t){function n(t){var n=e.getLinks(t.id);s[t.id]=r(n,t.id)}var r,s=Object.create(null);if(t=(t||"both").toLowerCase(),"both"===t||"inout"===t)r=a;else if("in"===t)r=o;else{if("out"!==t)throw new Error("Expected centrality degree kind is: in, out or both");r=i}return e.forEachNode(n),s}function o(e,t){for(var n=0,r=0;r<e.length;r+=1)n+=e[r].toId===t?1:0;return n}function i(e,t){for(var n=0,r=0;r<e.length;r+=1)n+=e[r].fromId===t?1:0;return n}function a(e){return e.length}t.exports=r},{}],6:[function(e,t,n){function r(e){var t=Object.create(null);return{on:function(n,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=t[n];return i||(i=t[n]=[]),i.push({callback:r,ctx:o}),e},off:function(n,r){var o="undefined"==typeof n;if(o)return t=Object.create(null),e;if(t[n]){var i="function"!=typeof r;if(i)delete t[n];else for(var a=t[n],s=0;s<a.length;++s)a[s].callback===r&&a.splice(s,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var i=0;i<r.length;++i){var a=r[i];a.callback.apply(a.ctx,o)}return e}}}function o(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}t.exports=function(e){o(e);var t=r(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e}},{}],7:[function(e,t,n){function r(t,n){function r(e,n){var r;if(void 0===n)r="string"==typeof e?e:e.id;else{var o=t.hasLink(e,n);if(!o)return;r=o.id}return b[r]}function i(e){return w[e]}function a(){t.on("changed",s)}function s(e){for(var t=0;t<e.length;++t){var n=e[t];"add"===n.changeType?(n.node&&f(n.node.id),n.link&&d(n.link)):"remove"===n.changeType&&(n.node&&c(n.node),n.link&&l(n.link))}}function u(){t.forEachNode(function(e){f(e.id)}),t.forEachLink(d)}function f(e){var n=w[e];if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var o=r.position;if(!o){var i=p(r);o=x.getBestNewBodyPosition(i)}n=x.addBodyAt(o,r.data),w[e]=n,v(e),h(r)&&(n.isPinned=!0)}}function c(e){var t=e.id,n=w[t];n&&(w[t]=null,delete w[t],x.removeBody(n))}function d(e){v(e.fromId),v(e.toId);var t=w[e.fromId],n=w[e.toId],r=x.addSpring(t,n,e.length);E(e,r),b[e.id]=r}function l(e){var n=b[e.id];if(n){var r=t.getNode(e.fromId),o=t.getNode(e.toId);r&&v(r.id),o&&v(o.id),delete b[e.id],x.removeSpring(n)}}function p(e){var t=[];if(!e.links)return t;for(var n=Math.min(e.links.length,2),r=0;n>r;++r){var o=e.links[r],i=o.fromId!==e.id?w[o.fromId]:w[o.toId];i&&i.pos&&t.push(i)}return t}function v(e){var t=w[e];t.mass=m(e)}function h(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}function g(e){var t=w[e];return t||(f(e),t=w[e]),t}function m(e){return 1+t.getLinks(e).length/3}if(!t)throw new Error("Graph structure cannot be undefined");var y=e("ngraph.physics.simulator"),x=y(n),w="function"==typeof Object.create?Object.create(null):{},b={},E=x.settings.springTransform||o;u(),a();var L={step:function(){return x.step()},getNodePosition:function(e){return g(e).pos},setNodePosition:function(e){var t=g(e);t.setPosition.apply(t,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var t=b[e];return t?{from:t.from.pos,to:t.to.pos}:void 0},getGraphRect:function(){return x.getBBox()},pinNode:function(e,t){var n=g(e.id);n.isPinned=!!t},isNodePinned:function(e){return g(e.id).isPinned},dispose:function(){t.off("changed",s)},getBody:i,getSpring:r,simulator:x};return L}function o(){}t.exports=r,t.exports.simulator=e("ngraph.physics.simulator")},{"ngraph.physics.simulator":8}],8:[function(e,t,n){function r(t){function n(){var e,t=l.length;if(t)for(v.insertBodies(l);t--;){if(e=l[t],!("width"in e)){var n=e.data.svgObject.getBBox();n&&(e.width=n.width,e.height=n.height)}e.isPinned||(e.force.reset(),v.updateBodyForce(e),m.update(e))}for(t=p.length;t--;)g.update(p[t])}var r=e("./lib/spring"),o=e("ngraph.expose"),i=e("ngraph.merge");t=i(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var a=t.createQuadTree||e("ngraph.quadtreebh"),s=t.createBounds||e("./lib/bounds"),u=t.createDragForce||e("./lib/dragForce"),f=t.createSpringForce||e("./lib/springForce"),c=t.integrator||e("./lib/eulerIntegrator"),d=t.createBody||e("./lib/createBody"),l=[],p=[],v=a(t),h=s(l,t),g=f(t),m=u(t),y={bodies:l,springs:p,settings:t,step:function(){n();var e=c(l,t.timeStep);return h.update(),e<t.stableThreshold},addBodyAt:function(e,t){if(!e)throw new Error("Body position is required");var n=d(e);return n.data=t,l.push(n),n},removeBody:function(e){if(e){var t=l.indexOf(e);if(!(0>t))return l.splice(t,1),0===l.length&&h.reset(),!0}},addSpring:function(e,t,n,o,i){if(!e||!t)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var a=new r(e,t,n,i>=0?i:-1,o);return p.push(a),a},removeSpring:function(e){if(e){var t=p.indexOf(e);return t>-1?(p.splice(t,1),!0):void 0}},getBestNewBodyPosition:function(e){return h.getBestNewPosition(e)},getBBox:function(){return h.box},gravity:function(e){return void 0!==e?(t.gravity=e,v.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,v.options({theta:e}),this):t.theta}};return o(t,y),y}t.exports=r},{"./lib/bounds":9,"./lib/createBody":10,"./lib/dragForce":11,"./lib/eulerIntegrator":12,"./lib/spring":13,"./lib/springForce":14,"ngraph.expose":15,"ngraph.merge":24,"ngraph.quadtreebh":17}],9:[function(e,t,n){t.exports=function(t,n){function r(){var e=t.length;if(0!==e){for(var n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;e--;){var s=t[e];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<n&&(n=s.pos.x),s.pos.x>o&&(o=s.pos.x),s.pos.y<r&&(r=s.pos.y),s.pos.y>a&&(a=s.pos.y)}i.x1=n,i.x2=o,i.y1=r,i.y2=a}}var o=e("ngraph.random").random(42),i={x1:0,y1:0,x2:0,y2:0};return{box:i,update:r,reset:function(){i.x1=i.y1=0,i.x2=i.y2=0},getBestNewPosition:function(e){var t=i,r=0,a=0;if(e.length){for(var s=0;s<e.length;++s)r+=e[s].pos.x,a+=e[s].pos.y;r/=e.length,a/=e.length}else r=(t.x1+t.x2)/2,a=(t.y1+t.y2)/2;var u=n.springLength;return{x:r+o.next(u)-u/2,y:a+o.next(u)-u/2}}}}},{"ngraph.random":25}],10:[function(e,t,n){var r=e("ngraph.physics.primitives");t.exports=function(e){return new r.Body(e)}},{"ngraph.physics.primitives":16}],11:[function(e,t,n){t.exports=function(t){var n=e("ngraph.merge"),r=e("ngraph.expose");t=n(t,{dragCoeff:.02});var o={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return r(t,o,["dragCoeff"]),o}},{"ngraph.expose":15,"ngraph.merge":24}],12:[function(e,t,n){function r(e,t){var n,r=0,o=0,i=0,a=0,s=e.length;for(n=0;s>n;++n){var u=e[n],f=t/u.mass;u.velocity.x+=f*u.force.x,u.velocity.y+=f*u.force.y;var c=u.velocity.x,d=u.velocity.y,l=Math.sqrt(c*c+d*d);l>1&&(u.velocity.x=c/l,u.velocity.y=d/l),r=t*u.velocity.x,i=t*u.velocity.y,u.pos.x+=r,u.pos.y+=i,o+=Math.abs(r),a+=Math.abs(i)}return(o*o+a*a)/e.length}t.exports=r},{}],13:[function(e,t,n){function r(e,t,n,r,o){this.from=e,this.to=t,this.length=n,this.coeff=r,this.weight="number"==typeof o?o:1}t.exports=r},{}],14:[function(e,t,n){t.exports=function(t){var n=e("ngraph.merge"),r=e("ngraph.random").random(42),o=e("ngraph.expose");t=n(t,{springCoeff:2e-4,springLength:80});var i={update:function(e){var n=e.from,o=e.to,i=e.length<0?t.springLength:e.length,a=o.pos.x-n.pos.x,s=o.pos.y-n.pos.y,u=Math.sqrt(a*a+s*s);0===u&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,u=Math.sqrt(a*a+s*s));var f=u-i,c=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*f/u*e.weight;n.force.x+=c*a,n.force.y+=c*s,o.force.x-=c*a,o.force.y-=c*s}};return o(t,i,["springCoeff","springLength"]),i}},{"ngraph.expose":15,"ngraph.merge":24,"ngraph.random":25}],15:[function(e,t,n){function r(e,t,n){var r="[object Array]"===Object.prototype.toString.call(n);if(r)for(var i=0;i<n.length;++i)o(e,t,n[i]);else for(var a in e)o(e,t,a)}function o(e,t,n){if(e.hasOwnProperty(n)){if("function"==typeof t[n])return;t[n]=function(r){return void 0!==r?(e[n]=r,t):e[n]}}}t.exports=r},{}],16:[function(e,t,n){function r(e,t){this.pos=new o(e,t),this.prevPos=new o(e,t),this.force=new o,this.velocity=new o,this.mass=1}function o(e,t){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0)}function i(e,t,n){this.pos=new a(e,t,n),this.prevPos=new a(e,t,n),this.force=new a,this.velocity=new a,this.mass=1}function a(e,t,n){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0,this.z="number"==typeof e.z?e.z:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof t?t:0,this.z="number"==typeof n?n:0)}t.exports={Body:r,Vector2d:o,Body3d:i,Vector3d:a},r.prototype.setPosition=function(e,t){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=t},o.prototype.reset=function(){this.x=this.y=0},i.prototype.setPosition=function(e,t,n){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=t,this.prevPos.z=this.pos.z=n},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],17:[function(e,t,n){function r(e,t){return 0===t?e.quad0:1===t?e.quad1:2===t?e.quad2:3===t?e.quad3:null}function o(e,t,n){0===t?e.quad0=n:1===t?e.quad1=n:2===t?e.quad2=n:3===t&&(e.quad3=n)}t.exports=function(t){t=t||{},t.gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var n=e("ngraph.random").random(1984),i=e("./node"),a=e("./insertStack"),s=e("./isSamePosition"),u=t.gravity,f=[],c=new a,d=t.theta,l=[],p=0,v=function(){var e=l[p];return e?(e.quad0=null,e.quad1=null,e.quad2=null,e.quad3=null,e.body=null,e.mass=e.massX=e.massY=0,e.left=e.right=e.top=e.bottom=0):(e=new i,l[p]=e),++p,e},h=v(),g=function(e){for(c.reset(),c.push(h,e);!c.isEmpty();){var t=c.pop(),i=t.node,a=t.body;if(i.body){var u=i.body;if(i.body=null,s(u.pos,a.pos)){var f=3;do{var d=n.nextDouble(),l=(i.right-i.left)*d,p=(i.bottom-i.top)*d;u.pos.x=i.left+l,u.pos.y=i.top+p,f-=1}while(f>0&&s(u.pos,a.pos));if(0===f&&s(u.pos,a.pos))return}c.push(i,u),c.push(i,a)}else{var g=a.pos.x,m=a.pos.y;i.mass=i.mass+a.mass,i.massX=i.massX+a.mass*g,i.massY=i.massY+a.mass*m;var y=0,x=i.left,w=(i.right+x)/2,b=i.top,E=(i.bottom+b)/2;if(g>w){y+=1;var L=x;x=w,w+=w-L}if(m>E){y+=2;var k=b;b=E,E+=E-k}var N=r(i,y);N?c.push(N,a):(N=v(),N.left=x,N.top=b,N.right=w,N.bottom=E,N.body=a,o(i,y,N))}}},m=function(e){function t(e){return e>0?e:-e}function r(e,t){var n=0;return t&&(n=t),e.length-n==2?e[n]>e[n+1]?e[n+1]:e[n]:(e[n]<e[n+1]&&(e[n+1]=e[n]),r(e,n+1))}var o,i,a,s,c=f,l=0,p=0,v=1,g=0,m=1;for(c[0]=h;v;){var y=c[g],x=y.body;v-=1,g+=1;var w=x!==e;if(x&&w){if("width"in x&&"width"in e&&e.width&&e.height&&x.width&&x.height){var b=x.pos.x+x.width/2,E=e.pos.x+e.width/2,L=x.pos.y+x.height/2,k=e.pos.y+e.height/2,N=1+1/Math.log(x.width+e.width),I=1+1/Math.log(x.height+e.height),j=t(b-E),A=r([t(e.pos.x-b),t(x.pos.x-E)]),P=r([t(e.pos.x+e.width-b),t(x.pos.x+x.width-E)]);i=(N*j+A+P)/(3+N);var _=t(L-k),T=r([t(e.pos.y-L),t(x.pos.y-k)]),C=r([t(e.pos.y+e.height-L),t(x.pos.y+x.height-k)]);a=(I*_+T+C)/(3+I),i*=b>E?1:-1,a*=L>k?1:-1}else i=x.pos.x-e.pos.x,a=x.pos.y-e.pos.y;s=Math.sqrt(i*i+a*a),0===s&&(i=(n.nextDouble()-.5)/50,a=(n.nextDouble()-.5)/50,s=Math.sqrt(i*i+a*a)),o=u*x.mass*e.mass/(s*s*s),l+=o*i,p+=o*a}else w&&(i=y.massX/y.mass-e.pos.x,a=y.massY/y.mass-e.pos.y,s=Math.sqrt(i*i+a*a),0===s&&(i=(n.nextDouble()-.5)/50,a=(n.nextDouble()-.5)/50,s=Math.sqrt(i*i+a*a)),(y.right-y.left)/s<d?(o=u*y.mass*e.mass/(s*s*s),l+=o*i,p+=o*a):(y.quad0&&(c[m]=y.quad0,v+=1,m+=1),y.quad1&&(c[m]=y.quad1,v+=1,m+=1),y.quad2&&(c[m]=y.quad2,v+=1,m+=1),y.quad3&&(c[m]=y.quad3,v+=1,m+=1)))}e.force.x+=l,e.force.y+=p},y=function(e){var t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=e.length;for(t=a;t--;){var s=e[t].pos.x,u=e[t].pos.y;n>s&&(n=s),s>o&&(o=s),r>u&&(r=u),u>i&&(i=u)}var f=o-n,c=i-r;for(f>c?i=r+f:o=n+c,p=0,h=v(),h.left=n,h.right=o,h.top=r,h.bottom=i,t=a-1,t>0&&(h.body=e[t]);t--;)g(e[t],h)};return{insertBodies:y,updateBodyForce:m,options:function(e){return e?("number"==typeof e.gravity&&(u=e.gravity),"number"==typeof e.theta&&(d=e.theta),this):{gravity:u,theta:d}}}}},{"./insertStack":18,"./isSamePosition":19,"./node":20,"ngraph.random":25}],18:[function(e,t,n){function r(){this.stack=[],this.popIdx=0}function o(e,t){this.node=e,this.body=t}t.exports=r,r.prototype={isEmpty:function(){return 0===this.popIdx},push:function(e,t){var n=this.stack[this.popIdx];n?(n.node=e,n.body=t):this.stack[this.popIdx]=new o(e,t),++this.popIdx},pop:function(){return this.popIdx>0?this.stack[--this.popIdx]:void 0},reset:function(){this.popIdx=0}}},{}],19:[function(e,t,n){t.exports=function(e,t){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1e-8>n&&1e-8>r}},{}],20:[function(e,t,n){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],21:[function(e,t,n){function r(e,t,n){var r;t=t||o,n=n||o,r="string"==typeof e?JSON.parse(e):e;var a,s=i();if(void 0===r.links||void 0===r.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<r.nodes.length;++a){var u=t(r.nodes[a]);if(!u.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");s.addNode(u.id,u.data)}for(a=0;a<r.links.length;++a){var f=n(r.links[a]);if(!f.hasOwnProperty("fromId")||!f.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");s.addLink(f.fromId,f.toId,f.data)}return s}function o(e){return e}t.exports=r;var i=e("ngraph.graph")},{"ngraph.graph":23}],22:[function(e,t,n){function r(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t,n=p();for(t=0;e-1>t;++t)n.addLink(t,t+1),n.addLink(e+t,e+t+1),n.addLink(t,e+t);return n.addLink(e-1,2*e-1),n}function o(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t=r(e);return t.addLink(0,e-1),t.addLink(e,2*e-1),t}function i(e){if(!e||1>e)throw new Error("At least two nodes are expected for complete graph");var t,n,r=p();for(t=0;e>t;++t)for(n=t+1;e>n;++n)t!==n&&r.addLink(t,n);return r}function a(e,t){if(!e||!t||0>e||0>t)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var n,r,o=p();for(n=0;e>n;++n)for(r=e;e+t>r;++r)o.addLink(n,r);return o}function s(e){if(!e||0>e)throw new Error("Invalid number of nodes");var t,n=p();for(n.addNode(0),t=1;e>t;++t)n.addLink(t-1,t);return n}function u(e,t){if(1>e||1>t)throw new Error("Invalid number of nodes in grid graph");var n,r,o=p();if(1===e&&1===t)return o.addNode(0),o;for(n=0;e>n;++n)for(r=0;t>r;++r){var i=n+r*e;n>0&&o.addLink(i,n-1+r*e),r>0&&o.addLink(i,n+(r-1)*e)}return o}function f(e,t,n){if(1>e||1>t||1>n)throw new Error("Invalid number of nodes in grid3 graph");var r,o,i,a=p();if(1===e&&1===t&&1===n)return a.addNode(0),a;for(i=0;n>i;++i)for(r=0;e>r;++r)for(o=0;t>o;++o){var s=i*e*t,u=r+o*e+s;r>0&&a.addLink(u,r-1+o*e+s),o>0&&a.addLink(u,r+(o-1)*e+s),i>0&&a.addLink(u,r+o*e+(i-1)*e*t)}return a}function c(e){if(0>e)throw new Error("Invalid number of nodes in balanced tree");var t,n=p(),r=Math.pow(2,e);for(0===e&&n.addNode(1),t=1;r>t;++t){var o=t,i=2*o,a=2*o+1;n.addLink(o,i),n.addLink(o,a)}return n}function d(e){if(0>e)throw new Error("Number of nodes shoul be >= 0");var t,n=p();for(t=0;e>t;++t)n.addNode(t);return n}function l(t,n,r,o){if(n>=t)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var i,a,s=e("ngraph.random").random(o||42),u=p();for(i=0;t>i;++i)u.addNode(i);for(var f=Math.floor(n/2+1),c=1;f>c;++c)for(i=0;t>i;++i)a=(c+i)%t,u.addLink(i,a);for(c=1;f>c;++c)for(i=0;t>i;++i)if(s.nextDouble()<r){var d=i;a=(c+i)%t;var l=s.next(t),v=l===d||u.hasLink(d,l);if(v&&u.getLinks(d).length===t-1)continue;for(;v;)l=s.next(t),v=l===d||u.hasLink(d,l);var h=u.hasLink(d,a);u.removeLink(h),u.addLink(d,l)}return u}t.exports={ladder:r,complete:i,completeBipartite:a,balancedBinTree:c,path:s,circularLadder:o,grid:u,grid3:f,noLinks:d,wattsStrogatz:l};var p=e("ngraph.graph")},{"ngraph.graph":23,"ngraph.random":25}],23:[function(e,t,n){function r(e){function t(){function e(){return V.beginUpdate=M=L,V.endUpdate=U=k,O=n,D=r,V.on=t,t.apply(V,arguments)}var t=V.on;V.on=e}function n(e,t){R.push({link:e,changeType:t})}function r(e,t){R.push({node:e,changeType:t})}function u(e,t){if(void 0===e)throw new Error("Invalid node identifier");M();var n=f(e);return n?D(n,"update"):(n=new i(e),T++,D(n,"add")),n.data=t,A[e]=n,U(),n}function f(e){return A[e]}function c(e){var t=f(e);if(!t)return!1;for(M();t.links.length;){var n=t.links[0];h(n)}return delete A[e],T--,D(t,"remove"),U(),!0}function d(e,t,n){M();var r=f(e)||u(e),o=f(t)||u(t),i=G(e,t,n);return P.push(i),r.links.push(i),
e!==t&&o.links.push(i),O(i,"add"),U(),i}function l(e,t,n){var r=e.toString()+t.toString();return new a(e,t,n,r)}function p(e,t,n){var r=e.toString()+"👉 "+t.toString(),o=_.hasOwnProperty(r);return(o||g(e,t))&&(o||(_[r]=0),r+="@"+ ++_[r]),new a(e,t,n,r)}function v(e){var t=f(e);return t?t.links:null}function h(e){if(!e)return!1;var t=o(e,P);if(0>t)return!1;M(),P.splice(t,1);var n=f(e.fromId),r=f(e.toId);return n&&(t=o(e,n.links),t>=0&&n.links.splice(t,1)),r&&(t=o(e,r.links),t>=0&&r.links.splice(t,1)),O(e,"remove"),U(),!0}function g(e,t){var n,r=f(e);if(!r)return null;for(n=0;n<r.links.length;++n){var o=r.links[n];if(o.fromId===e&&o.toId===t)return o}return null}function m(){M(),S(function(e){c(e.id)}),U()}function y(e){var t,n;if("function"==typeof e)for(t=0,n=P.length;n>t;++t)e(P[t])}function x(e,t,n){var r=f(e);return r&&r.links&&"function"==typeof t?n?b(r.links,e,t):w(r.links,e,t):void 0}function w(e,t,n){for(var r,o=0;o<e.length;++o){var i=e[o],a=i.fromId===t?i.toId:i.fromId;if(r=n(A[a],i))return!0}}function b(e,t,n){for(var r,o=0;o<e.length;++o){var i=e[o];if(i.fromId===t&&(r=n(A[i.toId],i)))return!0}}function E(){}function L(){C+=1}function k(){C-=1,0===C&&R.length>0&&(V.fire("changed",R),R.length=0)}function N(){return Object.keys?I:j}function I(e){if("function"==typeof e)for(var t=Object.keys(A),n=0;n<t.length;++n)if(e(A[t[n]]))return!0}function j(e){if("function"==typeof e){var t;for(t in A)if(e(A[t]))return!0}}e=e||{},void 0===e.uniqueLinkId&&(e.uniqueLinkId=!0);var A="function"==typeof Object.create?Object.create(null):{},P=[],_={},T=0,C=0,S=N(),G=e.uniqueLinkId?p:l,R=[],O=E,D=E,M=E,U=E,V={addNode:u,addLink:d,removeLink:h,removeNode:c,getNode:f,getNodesCount:function(){return T},getLinksCount:function(){return P.length},getLinks:v,forEachNode:S,forEachLinkedNode:x,forEachLink:y,beginUpdate:M,endUpdate:U,clear:m,hasLink:g,getLink:g};return s(V),t(),V}function o(e,t){if(t.indexOf)return t.indexOf(e);var n,r=t.length;for(n=0;r>n;n+=1)if(t[n]===e)return n;return-1}function i(e){this.id=e,this.links=[],this.data=null}function a(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}t.exports=r;var s=e("ngraph.events")},{"ngraph.events":6}],24:[function(e,t,n){function r(e,t){var n;if(e||(e={}),t)for(n in t)if(t.hasOwnProperty(n)){var o=e.hasOwnProperty(n),i=typeof t[n],a=!o||typeof e[n]!==i;a?e[n]=t[n]:"object"===i&&(e[n]=r(e[n],t[n]))}return e}t.exports=r},{}],25:[function(e,t,n){function r(e){var t="number"==typeof e?e:+new Date,n=function(){return t=t+2127912214+(t<<12)&4294967295,t=4294967295&(3345072700^t^t>>>19),t=t+374761393+(t<<5)&4294967295,t=4294967295&(t+3550635116^t<<9),t=t+4251993797+(t<<3)&4294967295,t=4294967295&(3042594569^t^t>>>16),(268435455&t)/268435456};return{next:function(e){return Math.floor(n()*e)},nextDouble:function(){return n()}}}function o(e,t){var n=t||r();if("function"!=typeof n.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(t){var r,o,i;for(r=e.length-1;r>0;--r)o=n.next(r+1),i=e[o],e[o]=e[r],e[r]=i,t(i);e.length&&t(e[0])},shuffle:function(){var t,r,o;for(t=e.length-1;t>0;--t)r=n.next(t+1),o=e[r],e[r]=e[t],e[t]=o;return e}}}t.exports={random:r,randomIterator:o}},{}],26:[function(e,t,n){function r(e,t,n){function r(e){s.nodes.push(u(e))}function o(e){s.links.push(f(e))}function i(e){var t={id:e.id};return void 0!==e.data&&(t.data=e.data),t}function a(e){var t={fromId:e.fromId,toId:e.toId};return void 0!==e.data&&(t.data=e.data),t}var s={nodes:[],links:[]},u=t||i,f=n||a;return e.forEachNode(r),e.forEachLink(o),JSON.stringify(s)}t.exports=r},{}],27:[function(e,t,n){function r(e,t){var n=o(e);if(void 0===t)return n;for(var r=Object.keys(t),i=0;i<r.length;++i){var a=r[i],s=t[a];"link"===a?n.link(s):n.attr(a,s)}return n}function o(e){function t(e){return v||(v=i(p)),v.link(e),p}function n(e,t,n){return a.addEventListener(p,e,t,n),p}function o(e,t,n){return a.removeEventListener(p,e,t,n),p}function f(e){var t=r(e);return p.appendChild(t),t}function c(e,t){return 2===arguments.length?(null!==t?p.setAttributeNS(null,e,t):p.removeAttributeNS(null,e),p):p.getAttributeNS(null,e)}function d(e){return arguments.length?(p.setAttributeNS(u,"xlink:href",e),p):p.getAttributeNS(u,"xlink:href")}function l(e){return void 0!==e?(p.textContent=e,p):p.textContent}var p=e;if("string"==typeof e)p=window.document.createElementNS(s,e);else if(e.simplesvg)return e;var v;return p.simplesvg=!0,p.attr=c,p.append=f,p.link=d,p.text=l,p.on=n,p.off=o,p.dataSource=t,p}t.exports=r,r.compile=e("./lib/compile");var i=r.compileTemplate=e("./lib/compile_template"),a=e("add-event-listener"),s="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink"},{"./lib/compile":28,"./lib/compile_template":29,"add-event-listener":31}],28:[function(e,t,n){function r(e){try{return e=o(e),a(i.parseFromString(e,"text/xml").documentElement)}catch(t){throw t}}function o(e){if(e){var t='xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"',n=e.match(/^<\w+/);if(n){var r=n[0].length;return e.substr(0,r)+" "+t+" "+e.substr(r)}throw new Error("Cannot parse input text: invalid xml?")}}var i=e("./domparser.js"),a=e("../");t.exports=r},{"../":27,"./domparser.js":30}],29:[function(e,t,n){function r(e){var t=Object.create(null);return o(e,t),{link:function(e){function n(t){t(e)}Object.keys(t).forEach(function(e){var r=t[e];r.forEach(n)})}}}function o(e,t){var n=e.nodeType,r=1===n||3===n;if(r){var s;if(e.hasChildNodes()){var u=e.childNodes;for(s=0;s<u.length;++s)o(u[s],t)}if(3===n&&a(e,t),e.attributes){var f=e.attributes;for(s=0;s<f.length;++s)i(f[s],e,t)}}}function i(e,t,n){function r(e){t.setAttributeNS(null,a,e[u])}var o=e.value;if(o){var i=o.match(s);if(i){var a=e.localName,u=i[1],f=u.indexOf(".")<0;if(!f)throw new Error("simplesvg currently does not support nested bindings");var c=n[u];c?c.push(r):c=n[u]=[r]}}}function a(e,t){function n(t){e.nodeValue=t[i]}var r=e.nodeValue;if(r){var o=r.match(s);if(o){var i=o[1],a=(i.indexOf(".")<0,t[i]);a?a.push(n):a=t[i]=[n]}}}t.exports=r;var s=/{{(.+?)}}/},{}],30:[function(e,t,n){function r(){return"undefined"==typeof DOMParser?{parseFromString:o}:new DOMParser}function o(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}t.exports=r()},{}],31:[function(e,t,n){function r(e,t,n,r){return f=f||(document.addEventListener?{add:i,rm:a}:{add:s,rm:u}),f.add(e,t,n,r)}function o(e,t,n,r){return f=f||(document.addEventListener?{add:i,rm:a}:{add:s,rm:u}),f.rm(e,t,n,r)}function i(e,t,n,r){e.addEventListener(t,n,r)}function a(e,t,n,r){e.removeEventListener(t,n,r)}function s(e,t,n,r){if(r)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+t,n)}function u(e,t,n,r){e.detachEvent("on"+t,n)}r.removeEventListener=o,r.addEventListener=r,t.exports=r;var f=null},{}],32:[function(e,t,n){function r(){return{betweennessCentrality:o,degreeCentrality:i}}function o(e){var t=s.betweenness(e);return a(t)}function i(e,t){var n=s.degree(e,t);return a(n)}function a(e){function t(t,n){return e[n]-e[t]}function n(t){return{key:t,value:e[t]}}return Object.keys(e).sort(t).map(n)}var s=e("ngraph.centrality");t.exports=r},{"ngraph.centrality":3}],33:[function(e,t,n){function r(){return{density:function(e,t){var n=e.getNodesCount();return 0===n?NaN:t?e.getLinksCount()/(n*(n-1)):2*e.getLinksCount()/(n*(n-1))}}}t.exports=r},{}],34:[function(e,t,n){function r(e,t){function n(e,n){var i;if(n){var a=t.getNodeUI(e.id);i=o(a),"function"==typeof n.onStart&&i.onStart(n.onStart),"function"==typeof n.onDrag&&i.onDrag(n.onDrag),"function"==typeof n.onStop&&i.onStop(n.onStop),r[e.id]=i}else(i=r[e.id])&&(i.release(),delete r[e.id])}var r={};return{bindDragNDrop:n}}t.exports=r;var o=e("./dragndrop.js")},{"./dragndrop.js":35}],35:[function(e,t,n){function r(e){var t,n,r,s,u,f,c,d=0,l=0,p=!1,v=0,h=function(e){var t=0,n=0;return e=e||window.event,e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,n=e.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[t,n]},g=function(e,t,r){n&&n(e,{x:t-d,y:r-l}),d=t,l=r},m=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},y=function(e){e.preventDefault&&e.preventDefault()},x=function(e){return m(e),!1},w=function(e){e=e||window.event,g(e,e.clientX,e.clientY)},b=function(e){if(e=e||window.event,p)return m(e),!1;var n=1===e.button&&null!==window.event||0===e.button;return n?(d=e.clientX,l=e.clientY,c=e.target||e.srcElement,t&&t(e,{x:d,y:l}),o.on("mousemove",w),o.on("mouseup",E),m(e),u=window.document.onselectstart,f=window.document.ondragstart,window.document.onselectstart=x,c.ondragstart=x,!1):void 0},E=function(e){e=e||window.event,o.off("mousemove",w),o.off("mouseup",E),window.document.onselectstart=u,c.ondragstart=f,c=null,r&&r(e)},L=function(t){if("function"==typeof s){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1;var n,r=h(t),o=a(e),i={x:r[0]-o[0],y:r[1]-o[1]};n=t.wheelDelta?t.wheelDelta/360:t.detail/-9,s(t,n,i)}},k=function(t){!s&&t?"webkit"===i.browser?e.addEventListener("mousewheel",L,!1):e.addEventListener("DOMMouseScroll",L,!1):s&&!t&&("webkit"===i.browser?e.removeEventListener("mousewheel",L,!1):e.removeEventListener("DOMMouseScroll",L,!1)),s=t},N=function(e,t){return(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY)},I=function(e){if(1===e.touches.length){m(e);var t=e.touches[0];g(e,t.clientX,t.clientY)}else if(2===e.touches.length){var n=N(e.touches[0],e.touches[1]),r=0;v>n?r=-1:n>v&&(r=1),s(e,r,{x:e.touches[0].clientX,y:e.touches[0].clientY}),v=n,m(e),y(e)}},j=function(e){p=!1,o.off("touchmove",I),o.off("touchend",j),o.off("touchcancel",j),c=null,r&&r(e)},A=function(e,n){m(e),y(e),d=n.clientX,l=n.clientY,c=e.target||e.srcElement,t&&t(e,{x:d,y:l}),p||(p=!0,o.on("touchmove",I),o.on("touchend",j),o.on("touchcancel",j))},P=function(e){return 1===e.touches.length?A(e,e.touches[0]):void(2===e.touches.length&&(m(e),y(e),v=N(e.touches[0],e.touches[1])))};return e.addEventListener("mousedown",b),e.addEventListener("touchstart",P),{onStart:function(e){return t=e,this},onDrag:function(e){return n=e,this},onStop:function(e){return r=e,this},onScroll:function(e){return k(e),this},release:function(){e.removeEventListener("mousedown",b),e.removeEventListener("touchstart",P),o.off("mousemove",w),o.off("mouseup",E),o.off("touchmove",I),o.off("touchend",j),o.off("touchcancel",j),k(null)}}}t.exports=r;var o=e("../Utils/documentEvents.js"),i=e("../Utils/browserInfo.js"),a=e("../Utils/findElementPosition.js")},{"../Utils/browserInfo.js":39,"../Utils/documentEvents.js":40,"../Utils/findElementPosition.js":41}],36:[function(e,t,n){function r(e,t){var n=o(t),r=null,i={},a={x:0,y:0};return n.mouseDown(function(e,t){r=e,a.x=t.clientX,a.y=t.clientY,n.mouseCapture(r);var o=i[e.id];return o&&o.onStart&&o.onStart(t,a),!0}).mouseUp(function(e){n.releaseMouseCapture(r),r=null;var t=i[e.id];return t&&t.onStop&&t.onStop(),!0}).mouseMove(function(e,t){if(r){var n=i[r.id];return n&&n.onDrag&&n.onDrag(t,{x:t.clientX-a.x,y:t.clientY-a.y}),a.x=t.clientX,a.y=t.clientY,!0}}),{bindDragNDrop:function(e,t){i[e.id]=t,t||delete i[e.id]}}}t.exports=r;var o=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":57}],37:[function(e,t,n){function r(e,t){function n(e){return d[e]}t=o(t,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var r=i(t.seed),s=new a(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),u={},f=function(e){return{x:r.next(t.maxX),y:r.next(t.maxY)}},c=function(e,t){e.x<t.x1&&(t.x1=e.x),e.x>t.x2&&(t.x2=e.x),e.y<t.y1&&(t.y1=e.y),e.y>t.y2&&(t.y2=e.y)},d="function"==typeof Object.create?Object.create(null):{},l=function(e){d[e.id]=f(e),c(d[e.id],s)},p=function(){0!==e.getNodesCount()&&(s.x1=Number.MAX_VALUE,s.y1=Number.MAX_VALUE,s.x2=Number.MIN_VALUE,s.y2=Number.MIN_VALUE,e.forEachNode(l))},v=function(e){u[e.id]=e},h=function(e){for(var t=0;t<e.length;++t){var n=e[t];n.node&&("add"===n.changeType?l(n.node):delete d[n.node.id]),n.link&&("add"===n.changeType?v(n.link):delete u[n.link.id])}};return e.forEachNode(l),e.forEachLink(v),e.on("changed",h),{run:function(e){this.step()},step:function(){return p(),!0},getGraphRect:function(){return s},dispose:function(){e.off("change",h)},isNodePinned:function(e){return!0},pinNode:function(e,t){},getNodePosition:n,getLinkPosition:function(e){var t=u[e];return{from:n(t.fromId),to:n(t.toId)}},setNodePosition:function(e,t,n){var r=d[e];r&&(r.x=t,r.y=n)},placeNode:function(e){return"function"==typeof e?(f=e,p(),this):f(e)}}}t.exports=r;var o=e("ngraph.merge"),i=e("ngraph.random").random,a=e("../Utils/rect.js")},{"../Utils/rect.js":45,"ngraph.merge":24,"ngraph.random":25}],38:[function(e,t,n){function r(e){function t(){var t=o(e);return t.addEventListener=t.on,t}if(console.log("This method is deprecated. Please use Viva.events() instead"),!e)return e;var n=void 0!==e.on||void 0!==e.off||void 0!==e.fire;return n?{extend:function(){return e},on:e.on,stop:e.off}:{extend:t,on:e.on,stop:e.off}}var o=e("ngraph.events");t.exports=r},{"ngraph.events":6}],39:[function(e,t,n){function r(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var e=window.navigator.userAgent.toLowerCase(),t=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,r=/(msie) ([\w.]+)/,o=/(mozilla)(?:.*? rv:([\w.]+))?/,i=t.exec(e)||n.exec(e)||r.exec(e)||e.indexOf("compatible")<0&&o.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}t.exports=r()},{}],40:[function(e,t,n){function r(){return void 0===typeof document?a:{on:o,off:i}}function o(e,t){document.addEventListener(e,t)}function i(e,t){document.removeEventListener(e,t)}var a=e("./nullEvents.js");t.exports=r()},{"./nullEvents.js":44}],41:[function(e,t,n){function r(e){var t=0,n=0;if(e.offsetParent)do t+=e.offsetLeft,n+=e.offsetTop;while(null!==(e=e.offsetParent));return[t,n]}t.exports=r},{}],42:[function(e,t,n){function r(e){if(!e)throw{message:"Cannot get dimensions of undefined container"};var t=e.clientWidth,n=e.clientHeight;return{left:0,top:0,width:t,height:n}}t.exports=r},{}],43:[function(e,t,n){function r(e,t,n,r,i,a,s,u){return o(e,t,e,r,i,a,s,u)||o(e,r,n,r,i,a,s,u)||o(n,r,n,t,i,a,s,u)||o(n,t,e,t,i,a,s,u)}var o=e("gintersect");t.exports=r},{gintersect:2}],44:[function(e,t,n){function r(){return{on:o,off:o,stop:o}}function o(){}t.exports=r()},{}],45:[function(e,t,n){function r(e,t,n,r){this.x1=e||0,this.y1=t||0,this.x2=n||0,this.y2=r||0}t.exports=r},{}],46:[function(e,t,n){(function(e){function n(){function t(e){function t(){o=a.requestAnimationFrame(t),e()||n()}function n(){a.cancelAnimationFrame(o),o=0}function r(){o||t()}var o;return t(),{stop:n,restart:r}}function n(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-s)),r=a.setTimeout(function(){e(t+n)},n);return s=t+n,r}function o(e){a.clearTimeout(e)}var i,a,s=0,u=["ms","moz","webkit","o"];for(a="undefined"!=typeof window?window:"undefined"!=typeof e?e:{setTimeout:r,clearTimeout:r},i=0;i<u.length&&!a.requestAnimationFrame;++i){var f=u[i];a.requestAnimationFrame=a[f+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}return a.requestAnimationFrame||(a.requestAnimationFrame=n),a.cancelAnimationFrame||(a.cancelAnimationFrame=o),t}function r(){}t.exports=n()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,n){function r(){return void 0===typeof window?a:{on:o,off:i}}function o(e,t){window.addEventListener(e,t)}function i(e,t){window.removeEventListener(e,t)}var a=e("./nullEvents.js");t.exports=r()},{"./nullEvents.js":44}],48:[function(e,t,n){function r(e,t){function n(e){return"string"==typeof F?F.indexOf(e)>=0:"boolean"==typeof F?F:!0}function r(){B=B||window.document.body,U=U||i(e,{springLength:80,springCoeff:2e-4}),V=V||a(e,{container:B}),t.hasOwnProperty("renderLinks")||(t.renderLinks=!0),t.prerender=t.prerender||0,O=(V.inputManager||u)(e,V)}function l(){V.beginRender(),t.renderLinks&&V.renderLinks(),V.renderNodes(),V.endRender()}function p(){return W=U.step()&&!J,l(),!W}function v(e){return D?void(X+=e):void(e?(X+=e,D=f(function(){return p()},R)):(Y=0,X=0,D=f(p,R)))}function h(){H||(W=!1,D.restart())}function g(){if("number"==typeof t.prerender&&t.prerender>0)for(var e=0;e<t.prerender;e+=1)U.step()}function m(){var e=U.getGraphRect(),t=c(B),n=(e.x2+e.x1)/2,r=(e.y2+e.y1)/2;$.offsetX=t.width/2-(n*$.scale-n),$.offsetY=t.height/2-(r*$.scale-r),V.graphCenterChanged($.offsetX,$.offsetY),q=!1}function y(e){var t=U.getNodePosition(e.id);V.addNode(e,t)}function x(e){V.releaseNode(e)}function w(e){var t=U.getLinkPosition(e.id);V.addLink(e,t)}function b(e){V.releaseLink(e)}function E(e){if(n("node")){var t=!1;O.bindDragNDrop(e,{onStart:function(){t=U.isNodePinned(e),U.pinNode(e,!0),J=!0,h()},onDrag:function(t,n){var r=U.getNodePosition(e.id);U.setNodePosition(e.id,r.x+n.x/$.scale,r.y+n.y/$.scale),J=!0,l()},onStop:function(){U.pinNode(e,t),J=!1}})}}function L(e){O.bindDragNDrop(e,null)}function k(){V.init(B),e.forEachNode(y),t.renderLinks&&e.forEachLink(w)}function N(){V.release(B)}function I(t){var n=t.node;"add"===t.changeType?(y(n),E(n),q&&m()):"remove"===t.changeType?(L(n),x(n),0===e.getNodesCount()&&(q=!0)):"update"===t.changeType&&(L(n),x(n),y(n),E(n))}function j(e){var n=e.link;if("add"===e.changeType)t.renderLinks&&w(n);else if("remove"===e.changeType)t.renderLinks&&b(n);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"}function A(e){var t,n;for(t=0;t<e.length;t+=1)n=e[t],n.node?I(n):n.link&&j(n);h()}function P(){m(),p()}function _(){M&&(M.release(),M=null)}function T(){e.off("changed",A)}function C(e,t){if(!t){var n=c(B);t={x:n.width/2,y:n.height/2}}var r=Math.pow(1.4,e?-.2:.2);return $.scale=V.scale(r,t),l(),K.fire("scale",$.scale),$.scale}function S(){s.on("resize",P),_(),n("drag")&&(M=d(B),M.onDrag(function(e,t){V.translateRel(t.x,t.y),l()})),n("scroll")&&(M||(M=d(B)),M.onScroll(function(e,t,n){C(0>t,n)})),e.forEachNode(E),T(),e.on("changed",A)}function G(){z=!1,T(),_(),s.off("resize",P),K.off(),D.stop(),e.forEachLink(function(e){t.renderLinks&&b(e)}),e.forEachNode(function(e){L(e),x(e)}),U.dispose(),N()}var R=30;t=t||{};var O,D,M,U=t.layout,V=t.graphics,B=t.container,F=void 0!==t.interactive?t.interactive:!0,z=!1,q=!0,Y=0,X=0,W=!1,J=!1,H=!1,$={offsetX:0,offsetY:0,scale:1},K=o({});return{run:function(e){return z||(r(),g(),k(),m(),S(),z=!0),v(e),this},reset:function(){V.resetScale(),m(),$.scale=1},pause:function(){H=!0,D.stop()},resume:function(){H=!1,D.restart()},rerender:function(){return l(),this},zoomOut:function(){return C(!0)},zoomIn:function(){return C(!1)},moveTo:function(e,t){V.graphCenterChanged($.offsetX-e*$.scale,$.offsetY-t*$.scale),l()},getGraphics:function(){return V},dispose:function(){G()},on:function(e,t){return K.on(e,t),this},off:function(e,t){return K.off(e,t),this}}}t.exports=r;var o=e("ngraph.events"),i=e("ngraph.forcelayout"),a=e("./svgGraphics.js"),s=e("../Utils/windowEvents.js"),u=e("../Input/domInputManager.js"),f=e("../Utils/timer.js"),c=e("../Utils/getDimensions.js"),d=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":34,"../Input/dragndrop.js":35,"../Utils/getDimensions.js":42,"../Utils/timer.js":46,"../Utils/windowEvents.js":47,"./svgGraphics.js":49,"ngraph.events":6,"ngraph.forcelayout":7}],49:[function(e,t,n){function r(){function e(){var e=o("svg");return t=o("g").attr("buffered-rendering","dynamic"),e.appendChild(t),e}var t,n,r,s=0,u=0,f=1,c={},d={},l=function(e){return o("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},p=function(e,t){e.attr("x",t.x-5).attr("y",t.y-5)},v=function(e){return o("line").attr("stroke","#999")},h=function(e,t,n){e.attr("x1",t.x).attr("y1",t.y).attr("x2",n.x).attr("y2",n.y)},g=function(e){e.fire("rescaled")},m={x:0,y:0},y={x:0,y:0},x={x:0,y:0},w=function(){if(t){var e="matrix("+f+", 0, 0,"+f+","+s+","+u+")";t.attr("transform",e)}};n=e();var b={getNodeUI:function(e){return c[e]},getLinkUI:function(e){return d[e]},node:function(e){return"function"==typeof e?(l=e,this):void 0},link:function(e){return"function"==typeof e?(v=e,this):void 0},placeNode:function(e){return p=e,this},placeLink:function(e){return h=e,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(e,t){s=e,u=t,w()},inputManager:a,translateRel:function(e,r){var o=n.createSVGPoint(),i=t.getCTM(),a=n.createSVGPoint().matrixTransform(i.inverse());o.x=e,o.y=r,o=o.matrixTransform(i.inverse()),o.x=(o.x-a.x)*i.a,o.y=(o.y-a.y)*i.d,i.e+=o.x,i.f+=o.y;var s="matrix("+i.a+", 0, 0,"+i.d+","+i.e+","+i.f+")";t.attr("transform",s)},scale:function(e,r){var o=n.createSVGPoint();o.x=r.x,o.y=r.y,o=o.matrixTransform(t.getCTM().inverse());var i=n.createSVGMatrix().translate(o.x,o.y).scale(e).translate(-o.x,-o.y),a=t.getCTM().multiply(i);f=a.a,s=a.e,u=a.f;var c="matrix("+a.a+", 0, 0,"+a.d+","+a.e+","+a.f+")";return t.attr("transform",c),g(this),f},resetScale:function(){f=1;var e="matrix(1, 0, 0, 1, 0, 0)";return t.attr("transform",e),g(this),this},init:function(e){e.appendChild(n),w(),"function"==typeof r&&r(n)},release:function(e){n&&e&&e.removeChild(n)},addLink:function(e,n){var r=v(e);if(r)return r.position=n,r.link=e,d[e.id]=r,t.childElementCount>0?t.insertBefore(r,t.firstChild):t.appendChild(r),r},releaseLink:function(e){var n=d[e.id];n&&(t.removeChild(n),delete d[e.id])},addNode:function(e,n){var r=l(e);if(r)return r.position=n,r.node=e,c[e.id]=r,t.appendChild(r),r},releaseNode:function(e){var n=c[e.id];n&&(t.removeChild(n),delete c[e.id])},renderNodes:function(){for(var e in c)if(c.hasOwnProperty(e)){var t=c[e];m.x=t.position.x,m.y=t.position.y,p(t,m,t.node)}},renderLinks:function(){for(var e in d)if(d.hasOwnProperty(e)){var t=d[e];y.x=t.position.from.x,y.y=t.position.from.y,x.x=t.position.to.x,x.y=t.position.to.y,h(t,y,x,t.link)}},getGraphicsRoot:function(e){return"function"==typeof e&&(n?e(n):r=e),n},getSvgRoot:function(){return n}};return i(b),b}t.exports=r;var o=e("simplesvg"),i=e("ngraph.events"),a=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":34,"ngraph.events":6,simplesvg:27}],50:[function(e,t,n){function r(e){e=c(e,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var t,n,r,d,l,p,v,h,g=0,m=0,y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[],w=[],b={},E={},L=i(),k=a(),N=function(e){return s()},I=function(e){return u(3014898687)},j=function(){L.updateTransform(y),k.updateTransform(y)},A=function(){y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},P=function(){t&&n&&(d=n.width=Math.max(t.offsetWidth,1),l=n.height=Math.max(t.offsetHeight,1),r&&r.viewport(0,0,d,l),L&&L.updateSize(d/2,l/2),k&&k.updateSize(d/2,l/2))},_=function(e){e.fire("rescaled")};n=window.document.createElement("canvas");var T={getLinkUI:function(e){return E[e]},getNodeUI:function(e){return b[e]},node:function(e){return"function"==typeof e?(N=e,this):void 0},link:function(e){return"function"==typeof e?(I=e,this):void 0},placeNode:function(e){return p=e,this},placeLink:function(e){return v=e,this},inputManager:o,beginRender:function(){},endRender:function(){m>0&&L.render(),g>0&&k.render()},bringLinkToFront:function(e){var t,n,r=L.getFrontLinkId();L.bringToFront(e),r>e.id&&(t=e.id,n=w[r],w[r]=w[t],w[r].id=r,w[t]=n,w[t].id=t)},graphCenterChanged:function(e,t){y[12]=2*e/d-1,y[13]=1-2*t/l,j()},addLink:function(e,t){var n=m++,r=I(e);return r.id=n,r.pos=t,L.createLink(r),w[n]=r,E[e.id]=r,r},addNode:function(e,t){var n=g++,r=N(e);return r.id=n,r.position=t,r.node=e,k.createNode(r),x[n]=r,b[e.id]=r,r},translateRel:function(e,t){y[12]+=2*y[0]*e/d/y[0],y[13]-=2*y[5]*t/l/y[5],j()},scale:function(e,t){var n=2*t.x/d-1,r=1-2*t.y/l;return n-=y[12],r-=y[13],y[12]+=n*(1-e),y[13]+=r*(1-e),y[0]*=e,y[5]*=e,j(),_(this),y[0]},resetScale:function(){return A(),r&&(P(),j()),this},init:function(o){var i={};if(e.preserveDrawingBuffer&&(i.preserveDrawingBuffer=!0),t=o,P(),A(),t.appendChild(n),r=n.getContext("experimental-webgl",i),!r){var a="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(a),a}if(e.enableBlending&&(r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND)),e.clearColor){var s=e.clearColorValue;r.clearColor(s.r,s.g,s.b,s.a),this.beginRender=function(){r.clear(r.COLOR_BUFFER_BIT)}}L.load(r),L.updateSize(d/2,l/2),k.load(r),k.updateSize(d/2,l/2),j(),"function"==typeof h&&h(n)},release:function(e){n&&e&&e.removeChild(n)},isSupported:function(){var e=window.document.createElement("canvas"),t=e&&e.getContext&&e.getContext("experimental-webgl");return t},releaseLink:function(e){m>0&&(m-=1);var t=E[e.id];delete E[e.id],L.removeLink(t);var n=t.id;if(m>n){if(0===m||m===n)return;var r=w[m];w[n]=r,r.id=n}},releaseNode:function(e){g>0&&(g-=1);var t=b[e.id];delete b[e.id],k.removeNode(t);var n=t.id;if(g>n){if(0===g||g===n)return;var r=x[g];x[n]=r,r.id=n,k.replaceProperties(t,r)}},renderNodes:function(){for(var e={x:0,y:0},t=0;g>t;++t){var n=x[t];e.x=n.position.x,e.y=n.position.y,p&&p(n,e),k.position(n,e)}},renderLinks:function(){if(!this.omitLinksRendering)for(var e={x:0,y:0},t={x:0,y:0},n=0;m>n;++n){var r=w[n],o=r.pos.from;t.x=o.x,t.y=-o.y,o=r.pos.to,e.x=o.x,e.y=-o.y,v&&v(r,t,e),L.position(r,t,e)}},getGraphicsRoot:function(e){return"function"==typeof e&&(n?e(n):h=e),n},setNodeProgram:function(e){if(!r&&e)k=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(e){if(!r&&e)L=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(e){return e.x=2*e.x/d-1,e.y=1-2*e.y/l,e.x=(e.x-y[12])/y[0],e.y=(e.y-y[13])/y[5],e.x=e.x*(d/2),e.y=e.y*(-l/2),e},transformGraphToClientCoordinates:function(e){return e.x=e.x/(d/2),e.y=e.y/(-l/2),e.x=e.x*y[0]+y[12],e.y=e.y*y[5]+y[13],e.x=(e.x+1)*d/2,e.y=(1-e.y)*l/2,e},getNodeAtClientPos:function(e,t){if("function"!=typeof t)return null;this.transformClientToGraphCoordinates(e);for(var n=0;g>n;++n)if(t(x[n],e.x,e.y))return x[n].node;return null}};return f(T),T}t.exports=r;var o=e("../Input/webglInputManager.js"),i=e("../WebGL/webglLinkProgram.js"),a=e("../WebGL/webglNodeProgram.js"),s=e("../WebGL/webglSquare.js"),u=e("../WebGL/webglLine.js"),f=e("ngraph.events"),c=e("ngraph.merge")},{"../Input/webglInputManager.js":36,"../WebGL/webglLine.js":58,"../WebGL/webglLinkProgram.js":59,"../WebGL/webglNodeProgram.js":60,"../WebGL/webglSquare.js":61,"ngraph.events":6,"ngraph.merge":24}],51:[function(e,t,n){function r(e){var t=10414335;if("string"==typeof e&&e)if(4===e.length&&(e=e.replace(/([^#])/g,"$1$1")),9===e.length)t=parseInt(e.substr(1),16);else{if(7!==e.length)throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+e;t=parseInt(e.substr(1),16)<<8|255}else"number"==typeof e&&(t=e);return t}t.exports=r},{}],52:[function(e,t,n){function r(e){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=e}t.exports=r},{}],53:[function(e,t,n){function r(e){function t(t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);throw window.alert(o),o}return r}function n(n,r){var o=e.createProgram(),i=t(n,e.VERTEX_SHADER),a=t(r,e.FRAGMENT_SHADER);if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var s=e.getShaderInfoLog(o);throw window.alert(s),s}return o}function r(e,t,n){if((t+1)*n>e.length){var r=new Float32Array(e.length*n*2);return r.set(e),r}return e}function a(t,n){for(var r={},o=0;o<n.length;++o){var i=n[o],a=-1;if("a"===i[0]&&"_"===i[1]){if(a=e.getAttribLocation(t,i),-1===a)throw new Error("Program doesn't have required attribute: "+i);r[i.slice(2)]=a}else{if("u"!==i[0]||"_"!==i[1])throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'");if(a=e.getUniformLocation(t,i),null===a)throw new Error("Program doesn't have required uniform: "+i);r[i.slice(2)]=a}}return r}return{createProgram:n,extendArray:r,copyArrayPart:o,swapArrayPart:i,getLocations:a,context:e}}function o(e,t,n,r){for(var o=0;r>o;++o)e[t+o]=e[n+o]}function i(e,t,n,r){for(var o=0;r>o;++o){var i=e[t+o];e[t+o]=e[n+o],e[n+o]=i}}t.exports=r},{}],54:[function(e,t,n){function r(e){function t(){var e;for(E.isDirty=!1,e=0;e<w.length;++e)w[e].isDirty=!1}function n(e){var t=y[e];if(!t)return!1;if(delete y[e],m-=1,m===t.offset)return!0;var n=c(t.offset),r=c(m);p(r,n);var o=y[b[m]];return o.offset=t.offset,b[t.offset]=b[m],l(),!0}function r(){return w}function a(e){return y[e]}function s(e,t){if(y.hasOwnProperty(e))t(y[e]);else{var n=new window.Image,r=m;m+=1,n.crossOrigin="anonymous",n.onload=function(){l(),f(r,n,t)},n.src=e}}function u(){var e=new i(h*g);w.push(e)}function f(e,t,n){var r=c(e),o={offset:e};r.textureNumber>=w.length&&u();var i=w[r.textureNumber];i.ctx.drawImage(t,r.col*g,r.row*g,g,g),b[e]=t.src,y[t.src]=o,i.isDirty=!0,n(o)}function c(t){var n=t/e<<0,r=t%e,o=r/h<<0,i=r%h;return{textureNumber:n,row:o,col:i}}function d(){E.isDirty=!0,x=0,v=null}function l(){v&&(window.clearTimeout(v),x+=1,v=null),x>10?d():v=window.setTimeout(d,400)}function p(e,t){var n=w[e.textureNumber].canvas,r=w[t.textureNumber].ctx,o=t.col*g,i=t.row*g;r.drawImage(n,e.col*g,e.row*g,g,g,o,i,g,g),w[e.textureNumber].isDirty=!0,w[t.textureNumber].isDirty=!0}var v,h=Math.sqrt(e||1024)<<0,g=h,m=1,y={},x=0,w=[],b=[];if(!o(e))throw"Tiles per texture should be power of two.";var E={isDirty:!1,clearDirty:t,remove:n,getTextures:r,getCoordinates:a,load:s};return E}function o(e){return 0===(e&e-1)}var i=e("./texture.js");t.exports=r},{"./texture.js":52}],55:[function(e,t,n){function r(e,t){return{_texture:0,_offset:0,size:"number"==typeof e?e:32,src:t}}t.exports=r},{}],56:[function(e,t,n){function r(){function e(e,t){e.nativeObject&&g.deleteTexture(e.nativeObject);var n=g.createTexture();g.activeTexture(g["TEXTURE"+t]),g.bindTexture(g.TEXTURE_2D,n),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,e.canvas),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST),g.generateMipmap(g.TEXTURE_2D),g.uniform1i(x["sampler"+t],t),e.nativeObject=n}function t(){if(v.isDirty){var t,n=v.getTextures();for(t=0;t<n.length;++t)(n[t].isDirty||!n[t].nativeObject)&&e(n[t],t);v.clearDirty()}}function n(e){g=e,y=s(e),v=new a(j),h=y.createProgram(I,N),g.useProgram(h),x=y.getLocations(h,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),g.uniform1f(x.tilesPerTexture,j),g.enableVertexAttribArray(x.vertexPos),g.enableVertexAttribArray(x.customAttributes),m=g.createBuffer()}function r(e,t){var n=e.id*k;P[n]=t.x-e.size,P[n+1]=t.y-e.size,P[n+2]=4*e._offset,P[n+3]=t.x+e.size,P[n+4]=t.y-e.size,P[n+5]=4*e._offset+1,P[n+6]=t.x-e.size,P[n+7]=t.y+e.size,P[n+8]=4*e._offset+2,P[n+9]=t.x-e.size,P[n+10]=t.y+e.size,P[n+11]=4*e._offset+2,P[n+12]=t.x+e.size,P[n+13]=t.y-e.size,P[n+14]=4*e._offset+1,P[n+15]=t.x+e.size,P[n+16]=t.y+e.size,P[n+17]=4*e._offset+3}function u(e){P=y.extendArray(P,A,k),A+=1;var t=v.getCoordinates(e.src);t?e._offset=t.offset:(e._offset=0,v.load(e.src,function(t){e._offset=t.offset}))}function f(e){A>0&&(A-=1),e.id<A&&A>0&&(e.src&&v.remove(e.src),y.copyArrayPart(P,e.id*k,A*k,k))}function c(e,t){t._offset=e._offset}function d(e){L=!0,E=e}function l(e,t){w=e,b=t,L=!0}function p(){g.useProgram(h),g.bindBuffer(g.ARRAY_BUFFER,m),g.bufferData(g.ARRAY_BUFFER,P,g.DYNAMIC_DRAW),L&&(L=!1,g.uniformMatrix4fv(x.transform,!1,E),g.uniform2f(x.screenSize,w,b)),g.vertexAttribPointer(x.vertexPos,2,g.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),g.vertexAttribPointer(x.customAttributes,1,g.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),
t(),g.drawArrays(g.TRIANGLES,0,6*A)}var v,h,g,m,y,x,w,b,E,L,k=18,N=o(),I=i(),j=1024,A=0,P=new Float32Array(64);return{load:n,position:r,createNode:u,removeNode:f,replaceProperties:c,updateTransform:d,updateSize:l,render:p}}function o(){return["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join("\n")}function i(){return["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join("\n")}var a=e("./webglAtlas.js"),s=e("./webgl.js");t.exports=r},{"./webgl.js":53,"./webglAtlas.js":54}],57:[function(e,t,n){function r(e){function t(){x=null}function n(e){x=e}function r(e){return"function"==typeof e&&I.push(e),A}function i(e){return"function"==typeof e&&N.push(e),A}function a(e){return"function"==typeof e&&k.push(e),A}function s(e){return"function"==typeof e&&L.push(e),A}function u(e){return"function"==typeof e&&E.push(e),A}function f(e){return"function"==typeof e&&b.push(e),A}function c(e){return"function"==typeof e&&w.push(e),A}function d(e,t,n){if(e&&e.size){var r=e.position,o=e.size;return r.x-o<t&&t<r.x+o&&r.y-o<n&&n<r.y+o}return!0}function l(t){return e.getNodeAtClientPos(t,d)}function p(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function v(e){return p(e),!1}function h(e,t){var n,r;for(n=0;n<e.length;n+=1)if(r=e[n].apply(void 0,t))return!0}function g(e){var t={x:0,y:0},n=null,r=1,i=+new Date,a=function(e){h(k,[n,e]),t.x=e.clientX,t.y=e.clientY},s=function(){o.off("mousemove",a),o.off("mouseup",s)},u=function(){y=e.getBoundingClientRect()};window.addEventListener("resize",u),u(),e.addEventListener("mousemove",function(e){if(!x){r++%7===0&&(u(),r=1);var o,i=!1;t.x=e.clientX-y.left,t.y=e.clientY-y.top,o=l(t),o&&n!==o?(n=o,i=i||h(w,[n])):null===o&&n!==o&&(i=i||h(b,[n]),n=null),i&&p(e)}}),e.addEventListener("mousedown",function(e){var r,i=!1;u(),t.x=e.clientX-y.left,t.y=e.clientY-y.top,r=[l(t),e],r[0]?(i=h(E,r),o.on("mousemove",a),o.on("mouseup",s),m=window.document.onselectstart,window.document.onselectstart=v,n=r[0]):n=null,i&&p(e)}),e.addEventListener("mouseup",function(e){var r,o=+new Date;t.x=e.clientX-y.left,t.y=e.clientY-y.top,r=[l(t),e],r[0]&&(window.document.onselectstart=m,400>o-i&&r[0]===n?h(I,r):h(N,r),i=o,h(L,r)&&p(e))})}if(e.webglInputEvents)return e.webglInputEvents;var m,y,x=null,w=[],b=[],E=[],L=[],k=[],N=[],I=[],j=e.getGraphicsRoot();g(j);var A={mouseEnter:c,mouseLeave:f,mouseDown:u,mouseUp:s,mouseMove:a,click:i,dblClick:r,mouseCapture:n,releaseMouseCapture:t};return e.webglInputEvents=A,A}var o=e("../Utils/documentEvents.js");t.exports=r},{"../Utils/documentEvents.js":40}],58:[function(e,t,n){function r(e){return{color:o(e)}}var o=e("./parseColor.js");t.exports=r},{"./parseColor.js":51}],59:[function(e,t,n){function r(){var e,t,n,r,i,a,s,u,f,c,d=6,l=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),p=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),v=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join("\n"),h=0,g=new ArrayBuffer(16*l),m=new Float32Array(g),y=new Uint32Array(g),x=function(){if((h+1)*l>g.byteLength){var e=new ArrayBuffer(2*g.byteLength),t=new Float32Array(e),n=new Uint32Array(e);n.set(y),m=t,y=n,g=e}};return{load:function(a){t=a,r=o(a),e=r.createProgram(v,p),t.useProgram(e),i=r.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),t.enableVertexAttribArray(i.vertexPos),t.enableVertexAttribArray(i.color),n=t.createBuffer()},position:function(e,t,n){var r=e.id,o=r*d;m[o]=t.x,m[o+1]=t.y,y[o+2]=e.color,m[o+3]=n.x,m[o+4]=n.y,y[o+5]=e.color},createLink:function(e){x(),h+=1,a=e.id},removeLink:function(e){h>0&&(h-=1),e.id<h&&h>0&&r.copyArrayPart(y,e.id*d,h*d,d)},updateTransform:function(e){c=!0,f=e},updateSize:function(e,t){s=e,u=t,c=!0},render:function(){t.useProgram(e),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,g,t.DYNAMIC_DRAW),c&&(c=!1,t.uniformMatrix4fv(i.transform,!1,f),t.uniform2f(i.screenSize,s,u)),t.vertexAttribPointer(i.vertexPos,2,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(i.color,4,t.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),t.drawArrays(t.LINES,0,2*h),a=h-1},bringToFront:function(e){a>e.id&&r.swapArrayPart(m,e.id*d,a*d,d),a>0&&(a-=1)},getFrontLinkId:function(){return a}}}var o=e("./webgl.js");t.exports=r},{"./webgl.js":53}],60:[function(e,t,n){function r(){function e(){if((I+1)*w>=L.byteLength){var e=new ArrayBuffer(2*L.byteLength),t=new Float32Array(e),n=new Uint32Array(e);n.set(N),k=t,N=n,L=e}}function t(e){d=e,v=o(e),c=v.createProgram(E,b),d.useProgram(c),p=v.getLocations(c,["a_vertexPos","a_color","u_screenSize","u_transform"]),d.enableVertexAttribArray(p.vertexPos),d.enableVertexAttribArray(p.color),l=d.createBuffer()}function n(e,t){var n=e.id;k[n*x]=t.x,k[n*x+1]=-t.y,k[n*x+2]=e.size,N[n*x+3]=e.color}function r(e){y=!0,m=e}function i(e,t){h=e,g=t,y=!0}function a(e){I>0&&(I-=1),e.id<I&&I>0&&v.copyArrayPart(N,e.id*x,I*x,x)}function s(){e(),I+=1}function u(){}function f(){d.useProgram(c),d.bindBuffer(d.ARRAY_BUFFER,l),d.bufferData(d.ARRAY_BUFFER,L,d.DYNAMIC_DRAW),y&&(y=!1,d.uniformMatrix4fv(p.transform,!1,m),d.uniform2f(p.screenSize,h,g)),d.vertexAttribPointer(p.vertexPos,3,d.FLOAT,!1,x*Float32Array.BYTES_PER_ELEMENT,0),d.vertexAttribPointer(p.color,4,d.UNSIGNED_BYTE,!0,x*Float32Array.BYTES_PER_ELEMENT,12),d.drawArrays(d.POINTS,0,I)}var c,d,l,p,v,h,g,m,y,x=4,w=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,b=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),E=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join("\n"),L=new ArrayBuffer(16*w),k=new Float32Array(L),N=new Uint32Array(L),I=0;return{load:t,position:n,updateTransform:r,updateSize:i,removeNode:a,createNode:s,replaceProperties:u,render:f}}var o=e("./webgl.js");t.exports=r},{"./webgl.js":53}],61:[function(e,t,n){function r(e,t){return{size:"number"==typeof e?e:10,color:o(t)}}var o=e("./parseColor.js");t.exports=r},{"./parseColor.js":51}],62:[function(e,t,n){t.exports="0.8.1"},{}]},{},[1])(1)});